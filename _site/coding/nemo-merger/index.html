<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEMO Merger Work Log | Denton Works</title>
    <meta name="description" content="My journey through wrenching, coding, and microelectronics projects! This is where I document my adventures and share my work with the lofty goal of making the world a better place.">
    <meta name="tags" content="lab-management, automation, merger, nemo, snf, snsf, database, migration, tools, users, area-access, consumables, rates, project-management, null">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-D4VMNE2JPX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-D4VMNE2JPX');
    </script>
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Mermaid CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mermaid@11.12.0/dist/mermaid.min.css">
    <!-- Model Viewer -->
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="nav__container">
                <a href="/" class="nav__brand">
                    Denton Works
                </a>
                <button class="nav__toggle" aria-label="Toggle navigation menu">
                    <span class="nav__toggle-line"></span>
                    <span class="nav__toggle-line"></span>
                    <span class="nav__toggle-line"></span>
                </button>
                <ul class="nav__menu">
                    <li><a href="/" class="nav__link">Home</a></li>
                    <li class="nav__dropdown">
                        <a href="/coding/" class="nav__link">Coding</a>
                        <ul class="nav__submenu">
                            <li><a href="/coding/nemo-merger/">NEMO Merger</a></li>
                            <li><a href="/coding/nemo-to-drive/">NEMO to Drive</a></li>
                            <li><a href="/coding/NEMO-MQTT-Plugin/">NEMO MQTT Plugin</a></li>
                            <li><a href="/coding/denton-works/">Denton Works Website</a></li>
                        </ul>
                    </li>
                    <li class="nav__dropdown">
                        <a href="/wrenching/" class="nav__link">Wrenching</a>
                        <ul class="nav__submenu">
                            <li><a href="/wrenching/thunderbird-restoration/">1968 Thunderbird</a></li>
                            <li><a href="/wrenching/3d-models/">3D Models</a></li>
                            <li><a href="/wrenching/general-mechanical/">General Mechanical</a></li>
                        </ul>
                    </li>
                    <li class="nav__dropdown">
                        <a href="/microelectronics/" class="nav__link">Microelectronics</a>
                        <ul class="nav__submenu">
                            <li><a href="/microelectronics/Smart-T-Bird/">Smart Thunderbird</a></li>
                            <li><a href="/microelectronics/NEMO-Tool-Display-Hardware/">NEMO Tool Display</a></li>
                        </ul>
                    </li>
                    <li class="nav__dropdown">
                        <a href="/general/" class="nav__link">General</a>
                        <ul class="nav__submenu">
                            <li><a href="/general/Today-I-Learned/">Today I Learned</a></li>
                            <li><a href="/general/everything-else/">Everything Else</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <main class="main">
        <article class="container">
    <header class="page-header">
        <h1>NEMO Merger Work Log</h1>
        
    </header>
    
    <div class="page-content">
        <h2>Project Overview</h2>
<ul>
<li>SNF and SNSF are merging and we need to have a unified lab management system, here we go.</li>
</ul>
<h2>Example uploadflow:</h2>
<div class="mermaid" id="mermaid-eg7h046mq">
graph LR
    A["Download rate types"] --> B["Generate a rate matching scheme<br>that associates a rate type<br>with a NEMO ID"]
    B --> C["Download existing accounts"]
    C --> D["Map SNSF spreadsheet columns<br>to NEMO fields"]
    D --> E["Check against existing accounts"]
    E --> F["Upload New accounts"]
</div>
<h2>Up Next:</h2>
<ul>
<li>Adding onboardgin phases to lab members
<ul>
<li>adding onboarding if they are also qualified on the &quot;SNF safety training&quot; tool</li>
<li><s>If they have a &quot;last sign in&quot; then they must have been an SNF user</s></li>
<li><s>If they are in the SNSF spreadsheets, they will get the SNSF onboarding phase</s></li>
</ul>
</li>
<li>Writing a script that does the door charges automatically from the linel data.
<ul>
<li>Waiting on sample linel data.</li>
</ul>
</li>
<li>Creating a sheet for everything lab members need to check</li>
<li>Everything Staff needs to check</li>
<li>List of things to upload over break
<ul>
<li>When can I get the last user and qualification lists?</li>
</ul>
</li>
<li>Updating the knowledge bases for staff and lab members</li>
<li>Adding the Kiosk Issue to gitlab</li>
</ul>
<h2>Notes for Launch day:</h2>
<ul>
<li>Enable interlocks</li>
<li>Moving Allen tools to the Allen folder</li>
<li>Make consumables visible in NEMO</li>
</ul>
<h2>Stats:</h2>
<ul>
<li>Accounts: 317-&gt;590</li>
<li>Projects: 882-&gt; 1311</li>
<li>Lab Members: 1120 -&gt; 1778 (internal only) -&gt; 1904 (internal and external)</li>
<li>Interlocks Cards: 144 -&gt; 247</li>
<li>Interlocks: 172 -&gt; 269</li>
<li>Tools: 200 -&gt; 421</li>
</ul>
<p>Total accounts: 590
Accounts with projects: 525
Accounts without projects: 65</p>
<p>Figuring out Onboarding Phases, currently:
SNSF count: 1361/1919
SNF count: 348/1919
neither count: 208/1919
both count: 2/1919</p>
<p>(# for adding SNF onboarding phase)
Total lab members processed: 1919
Lab members successfully updated: 568
Lab members skipped: 1351
Lab members with failed updates: 0</p>
<p>âœ“ 568 lab member(s) had phase 1 added to their onboarding phases</p>
<h2>Work Log</h2>
<h3>12/2/2025</h3>
<p><strong>Main Task:</strong> Adding consumables</p>
<p><strong>Notes:</strong></p>
<ul>
<li>Added consumables</li>
<li>Added consumable rates</li>
<li>Worked with admins to figure out eh whole door access and billing thing.</li>
</ul>
<h3>11/21/2025</h3>
<p><strong>Main Task:</strong> Adding NEMO launch resource to tools, making tools visible</p>
<p><strong>Notes:</strong></p>
<ul>
<li>Added the NEMO launch resource as a dependency to the tools</li>
<li>Scheduled a resource outage to end on December 31st at midnight</li>
<li>Made the tools visible in NEMO, mingling with the old Allen tools.</li>
</ul>
<p>11/17/2025:
<strong>Main Task:</strong> Uploading Interlocks Cards, starting interlocks</p>
<p><strong>Notes:</strong></p>
<ul>
<li>Uploaded interlock cards, did a test push to nemo-plan which was a good ide</li>
<li></li>
</ul>
<p>11/10/2025:
<strong>Main Task:</strong> Uploading Tools, Uploading Internal lab members</p>
<p><strong>Notes:</strong></p>
<ul>
<li>Downloaded the tool from NEMO-Plan, which had the hierarchy that grant wanted</li>
<li>Uploaded them to NEMO, making them invisible until we're ready to launch</li>
<li>Uploaded the internal lab members. It was tricky because there was also a column that had multiple PTAs, so I had to do a look up for that field as well</li>
<li></li>
</ul>
<p>11/9/2025:
<strong>Main Task:</strong> Uploading PTAs</p>
<p><strong>Notes:</strong></p>
<ul>
<li>Uploaded the PTAs, went pretty well</li>
<li>PTAs must each have a unique name, so I wasn't able to upload the duplicate TSMC - SNSF PTA, currently have a RFI out to the admins</li>
<li>For the external users, the username is the SUNet ID, but the email can be whatever username they want.</li>
<li></li>
</ul>
<p>11/8/2025:
<strong>Main Task:</strong> Un-Fucking the accounts</p>
<p><strong>Notes:</strong></p>
<ul>
<li>Ok so I jumped the gun and added too many accounts, here are some specs just to remember:</li>
<li>Total PIs in Excel: 361
Duplicate accounts (already exist): 113
New accounts to create: 248
Successfully created: 242
Failed to create: 6
Success rate: 97.6%
(venv) (base) adenton@SOE-FVFHW06VQ05F NEMO-Merger % /Users/adenton/Desktop
/NEMO-Merger/venv/bin/python /Users/adenton/Desktop/NEMO-Merger/download_ac
counts.py
Starting account download from NEMO API...
API Endpoint: https://nemo.stanford.edu/api/accounts/</li>
<li>here's how I'm going to un-fuck it: I'm going to upload all the new accounts, and the associated PTAs.</li>
<li>THEN is an accoount doesn't have a PTA, I will mark is as inactive</li>
<li>HAHA!</li>
<li>Also compared the dirty list I uploaded and the clean list and then deleted the dirty ones that I may have uploaded by mistake.</li>
<li>Edited the project upload to work from the new clean excel file.</li>
</ul>
<h3>11/7/2025</h3>
<p><strong>Main Task:</strong> Update</p>
<p><strong>Notes:</strong></p>
<ul>
<li>The SNSF admins decided they needed to clean the PTAs before I upload them, so waiting on that.</li>
<li>Badger does not correlate SUNet IDs to users, so there are some SNSF users that have multiple accounts.
<ul>
<li>We're trying to figure out a way to merge these accounts on their SUNet ID, but we don't know everyones sunet.</li>
</ul>
</li>
<li>Added location to the batch tool upload</li>
<li>I also realixed I have the interlock information here as well.
<ul>
<li>Is there a way to upload all the interlock information without actually triggering it?</li>
<li>Yes there is</li>
</ul>
</li>
</ul>
<h3>11/6/2025</h3>
<p><strong>Main Task:</strong> Refreshing my knowledge, uploading Accounts</p>
<p><strong>Notes:</strong></p>
<ul>
<li>The &quot;reate projects&quot; function was relying on the API to give a 409 error and check for duplicates but I don't trust that</li>
<li>Created a new function that downlaods all the PTAs and check the excel file against it before uploading</li>
<li>By default, the &quot;name&quot; and &quot;account&quot; fields should match in nemo, the PTA should only be in the PTA field.</li>
<li>Accounts are a mandatory field when creating a project, do I need to push a bunch of accounts first?
<ul>
<li>In the user account excel file, the &quot;piemail&quot; field is the account name, I may need to first push all of these</li>
</ul>
</li>
<li>Today I successfully created the accounts, keeping in mind that each one has a rate category associated with it, so that required a look up table.</li>
</ul>
<h3>08/21/2025</h3>
<ul>
<li>My &quot;add allen prefix&quot; went a bit wild and added the prefix to the wrong things so I corrected it and moved the Shriram/Spilker all that to the right category</li>
</ul>
<h3>08/12/2025</h3>
<ul>
<li>the staff charges and tool training charges were previously set to be global, so only one staff chaarge and one staff training charge could exist
<ul>
<li>Seems to be some kind of bug, can't make staff charges tool by tool</li>
</ul>
</li>
<li>Changed the tool hierarchy so everything in the SNF is now under Allen</li>
<li>Up Next is adding the access areas like Grant and I talked about</li>
</ul>
<h3>08/11/2025</h3>
<ul>
<li>Started working on the gap analysis, honestly too hard to think of all the gaps</li>
<li>Started coding instead, uploaded all the tools under the category SNSF</li>
<li>I'm slowly finding the roots of things</li>
<li>for example I'd like to upload users, but first I thought to Upload PTAs, but to upload those you need a to upload accounts</li>
<li>So far I've uploaded all the tools, added Allen to our lab members,</li>
</ul>
<h2>Done:</h2>
<ul>
<li><s>adding consumables</s></li>
<li><s>adding consumable rates</s></li>
<li><s>Adding PTA expiration dates</s></li>
<li><s>Fixing existing lab members, making sure they have the PTAs they need</s></li>
<li><s>Adding Core facilities to tools for billing purposes</s>
<ul>
<li><s>Email Carsen, can't be done via api, needs to be done manually</s></li>
</ul>
</li>
<li><s>Adding tool qualifications</s>
<ul>
<li><s>only adding active user qualifications</s></li>
</ul>
</li>
<li><s>Assigning interlocks to tools</s></li>
<li><s>Making sure staff cannot modify tool names (can't be done)</s></li>
<li><s>Adding Dependencies to SNSF tools</s></li>
<li><s>removing that dependency</s></li>
<li><s>Making SNSF tools visible in NEMO</s></li>
<li><s>Wendy and different lab member priveledges</s>
<ul>
<li><s>Decided to give lab members staff priveledges on the tools they are super users on.</s></li>
</ul>
</li>
<li><s>Adding IDs to lab members for door charges</s></li>
</ul>

    </div>
</article>

    </main>

    <footer class="footer">
        <div class="footer__container">
            <p>&copy; 2025 Alex - Denton Works</p>
            <div class="footer__social">
                <a href="https://github.com/alexanderenrique" target="_blank" rel="noopener">GitHub</a>
                <a href="https://twitter.com/yourusername" target="_blank" rel="noopener">Twitter</a>
            </div>
        </div>
    </footer>

    <script src="/js/main.js"></script>
    <!-- Mermaid JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@11.12.0/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#3b82f6',
                primaryTextColor: '#1f2937',
                primaryBorderColor: '#1e40af',
                lineColor: '#6b7280',
                secondaryColor: '#f3f4f6',
                tertiaryColor: '#ffffff'
            }
        });
    </script>
</body>
</html>
