<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEMO Merger Work Log | Denton Works</title>
    <meta name="description" content="My journey through wrenching, coding, and microelectronics projects! This is where I document my adventures and share my work with the lofty goal of making the world a better place.">
    <meta name="tags" content="lab-management, automation, merger, nemo, snf, snsf, database, migration, tools, users, area-access, consumables, rates, project-management, null">
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Mermaid CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mermaid@11.12.0/dist/mermaid.min.css">
    <!-- Model Viewer -->
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="nav__container">
                <a href="/" class="nav__brand">
                    Denton Works
                </a>
                <button class="nav__toggle" aria-label="Toggle navigation menu">
                    <span class="nav__toggle-line"></span>
                    <span class="nav__toggle-line"></span>
                    <span class="nav__toggle-line"></span>
                </button>
                <ul class="nav__menu">
                    <li><a href="/" class="nav__link">Home</a></li>
                    <li class="nav__dropdown">
                        <a href="/coding/" class="nav__link">Coding</a>
                        <ul class="nav__submenu">
                            <li><a href="/coding/nemo-merger/">NEMO Merger</a></li>
                            <li><a href="/coding/nemo-to-drive/">NEMO to Drive</a></li>
                            <li><a href="/coding/NEMO-MQTT-Plugin/">NEMO MQTT Plugin</a></li>
                            <li><a href="/coding/denton-works/">Denton Works Website</a></li>
                        </ul>
                    </li>
                    <li class="nav__dropdown">
                        <a href="/wrenching/" class="nav__link">Wrenching</a>
                        <ul class="nav__submenu">
                            <li><a href="/wrenching/thunderbird-restoration/">1968 Thunderbird</a></li>
                            <li><a href="/wrenching/3d-models/">3D Models</a></li>
                            <li><a href="/wrenching/general-mechanical/">General Mechanical</a></li>
                        </ul>
                    </li>
                    <li class="nav__dropdown">
                        <a href="/microelectronics/" class="nav__link">Microelectronics</a>
                        <ul class="nav__submenu">
                            <li><a href="/microelectronics/Smart-T-Bird/">Smart Thunderbird</a></li>
                            <li><a href="/microelectronics/NEMO-Tool-Display-Hardware/">NEMO Tool Display</a></li>
                        </ul>
                    </li>
                    <li class="nav__dropdown">
                        <a href="/general/" class="nav__link">General</a>
                        <ul class="nav__submenu">
                            <li><a href="/general/Today-I-Learned/">Today I Learned</a></li>
                            <li><a href="/general/everything-else/">Everything Else</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <main class="main">
        <article class="container">
    <header class="page-header">
        <h1>NEMO Merger Work Log</h1>
        
    </header>
    
    <div class="page-content">
        <h2>Project Overview</h2>
<ul>
<li>SNF and SNSF are merging and we need to have a unified lab management system, here we go.</li>
</ul>
<h2>Example standard process flow:</h2>
<div class="mermaid" id="mermaid-f6o57ezgz">
graph LR
    A["Download rate types"] --> B["Generate a rate matching scheme<br>that associates a rate type<br>with a NEMO ID"]
    B --> C["Download existing accounts"]
    C --> D["Map SNSF spreadsheet columns<br>to NEMO fields"]
    D --> E["Check against existing accounts"]
    E --> F["Upload New accounts"]
</div>
<p>Dependency tree:</p>
<p>Rate types -&gt; Accounts -&gt; PTAs -&gt; Projects -&gt; Lab members</p>
<p>Lab members have: Projects, user types, qualifications, projects</p>
<h2>Up Next:</h2>
<ul>
<li>Adding interlock cards, which defines the IP address, port, and protocol
<ul>
<li>This also includes the name of the tool, just to make it easier to identify</li>
<li>Interlock card tool name is not binding, just a label</li>
</ul>
</li>
<li>Adding interlock, this is where it is associalted with the tool
<ul>
<li>Can be set to false so it doesn't trigger tools until we're ready.</li>
</ul>
</li>
</ul>
<p>Questions:</p>
<ul>
<li>When Adding the external lab members, should I include the expiration date of their SUNet ID?
<ul>
<li>I could add this to the &quot;Active access expiration date&quot; field</li>
</ul>
</li>
</ul>
<h2>Notes for Launch day:</h2>
<ul>
<li>Make tools visible</li>
<li>Enable interlocks</li>
<li>Moving Allen tools to the Allen folder</li>
</ul>
<h2>Actual Process flow for other people to follow:</h2>
<ul>
<li>Download account types</li>
<li>Create the accounts, these are some of the most fundamental blocks
<ul>
<li>Download accounts from current NEMO</li>
<li>Compare these to the accounts you want to upload</li>
<li>The other thiing about the accounts is that the internal/externa/SBIR has a different name between SNSF and NEMO so you also meed a mapping step</li>
<li>Map accounts against account types</li>
<li>Check against current account list to see if it already exists</li>
</ul>
</li>
<li>Interlocks:
<ul>
<li>Download interlock categories</li>
<li></li>
</ul>
</li>
</ul>
<h2>Procedure for Future Alex</h2>
<ul>
<li>Downloading the current SNF users and adding the area access to Allen they need</li>
<li>Adding accounts</li>
<li>Downloading the accounts so you can then map those to the projects you're going to upload</li>
<li>Upload the tools (anytime, I might want to organize them in NEMO-Plan, then move that hierarchy to live NEMO)</li>
</ul>
<h2>Stats:</h2>
<ul>
<li>Accounts: 317-&gt;590</li>
<li>Projects: 882-&gt; 1311</li>
<li>Lab Members: 1120 -&gt; 1778 (internal only) -&gt; XXX (internal and external)</li>
<li>Interlocks: 144 -&gt;</li>
<li>Tools: 200 -&gt; 421</li>
</ul>
<p>Total accounts: 590
Accounts with projects: 525
Accounts without projects: 65</p>
<p>37 PTAs are duplicated
99 projects use these duplicate PTAs</p>
<h2>Work Log</h2>
<p>11/10/2025:
<strong>Main Task:</strong> Uploading Tools, Uploading Internal lab members</p>
<p><strong>Notes:</strong></p>
<ul>
<li>Downloaded the tool from NEMO-Plan, which had the hierarchy that grant wanted</li>
<li>Uploaded them to NEMO, making them invisible until we're ready to launch</li>
<li>Uploaded the internal lab members. It was tricky because there was also a column that had multiple PTAs, so I had to do a look up for that field as well</li>
<li></li>
</ul>
<p>11/9/2025:
<strong>Main Task:</strong> Uploading PTAs</p>
<p><strong>Notes:</strong></p>
<ul>
<li>Uploaded the PTAs, went pretty well</li>
<li>PTAs must each have a unique name, so I wasn't able to upload the duplicate TSMC - SNSF PTA, currently have a RFI out to the admins</li>
<li>For the external users, the username is the SUNet ID, but the email can be whatever username they want.</li>
<li></li>
</ul>
<p>11/8/2025:
<strong>Main Task:</strong> Un-Fucking the accounts</p>
<p><strong>Notes:</strong></p>
<ul>
<li>Ok so I jumped the gun and added too many accounts, here are some specs just to remember:</li>
<li>Total PIs in Excel: 361
Duplicate accounts (already exist): 113
New accounts to create: 248
Successfully created: 242
Failed to create: 6
Success rate: 97.6%
(venv) (base) adenton@SOE-FVFHW06VQ05F NEMO-Merger % /Users/adenton/Desktop
/NEMO-Merger/venv/bin/python /Users/adenton/Desktop/NEMO-Merger/download_ac
counts.py
Starting account download from NEMO API...
API Endpoint: https://nemo.stanford.edu/api/accounts/</li>
<li>here's how I'm going to un-fuck it: I'm going to upload all the new accounts, and the associated PTAs.</li>
<li>THEN is an accoount doesn't have a PTA, I will mark is as inactive</li>
<li>HAHA!</li>
<li>Also compared the dirty list I uploaded and the clean list and then deleted the dirty ones that I may have uploaded by mistake.</li>
<li>Edited the project upload to work from the new clean excel file.</li>
</ul>
<h3>11/7/2025</h3>
<p><strong>Main Task:</strong> Update</p>
<p><strong>Notes:</strong></p>
<ul>
<li>The SNSF admins decided they needed to clean the PTAs before I upload them, so waiting on that.</li>
<li>Badger does not correlate SUNet IDs to users, so there are some SNSF users that have multiple accounts.
<ul>
<li>We're trying to figure out a way to merge these accounts on their SUNet ID, but we don't know everyones sunet.</li>
</ul>
</li>
<li>Added location to the batch tool upload</li>
<li>I also realixed I have the interlock information here as well.
<ul>
<li>Is there a way to upload all the interlock information without actually triggering it?</li>
<li>Yes there is</li>
</ul>
</li>
</ul>
<h3>11/6/2025</h3>
<p><strong>Main Task:</strong> Refreshing my knowledge, uploading Accounts</p>
<p><strong>Notes:</strong></p>
<ul>
<li>The &quot;reate projects&quot; function was relying on the API to give a 409 error and check for duplicates but I don't trust that</li>
<li>Created a new function that downlaods all the PTAs and check the excel file against it before uploading</li>
<li>By default, the &quot;name&quot; and &quot;account&quot; fields should match in nemo, the PTA should only be in the PTA field.</li>
<li>Accounts are a mandatory field when creating a project, do I need to push a bunch of accounts first?
<ul>
<li>In the user account excel file, the &quot;piemail&quot; field is the account name, I may need to first push all of these</li>
</ul>
</li>
<li>Today I successfully created the accounts, keeping in mind that each one has a rate category associated with it, so that required a look up table.</li>
</ul>
<h3>08/21/2025</h3>
<ul>
<li>My &quot;add allen prefix&quot; went a bit wild and added the prefix to the wrong things so I corrected it and moved the Shriram/Spilker all that to the right category</li>
</ul>
<h3>08/12/2025</h3>
<ul>
<li>the staff charges and tool training charges were previously set to be global, so only one staff chaarge and one staff training charge could exist
<ul>
<li>Seems to be some kind of bug, can't make staff charges tool by tool</li>
</ul>
</li>
<li>Changed the tool hierarchy so everything in the SNF is now under Allen</li>
<li>Up Next is adding the access areas like Grant and I talked about</li>
</ul>
<h3>08/11/2025</h3>
<ul>
<li>Started working on the gap analysis, honestly too hard to think of all the gaps</li>
<li>Started coding instead, uploaded all the tools under the category SNSF</li>
<li>I'm slowly finding the roots of things</li>
<li>for example I'd like to upload users, but first I thought to Upload PTAs, but to upload those you need a to upload accounts</li>
<li>So far I've uploaded all the tools, added Allen to our lab members,</li>
<li>Mapping for new area access:
<ul>
<li>SMF =</li>
<li>SNC =</li>
<li>SNL</li>
</ul>
</li>
</ul>
<h2>September 1st Goals:</h2>
<p>-Minimum:
- Gap analysis (consolidating thoughts)
- All Tools Into Merged NEMO, everyone has access</p>
<ul>
<li>Order of operations:
<ul>
<li>Meet up with Grant/Carsen, figure out the access areas</li>
<li>Do a skeleton framework for tools</li>
<li>Education sessions with tool owners so they can configure their tools</li>
<li>SNSF review everything! I did my best to translate what I saw to NEMO language but it must be perfect on Jan 1st</li>
<li>Creating Billing documents to share with admin team (what do we already have?)</li>
</ul>
</li>
</ul>
<h2>Thinking</h2>
<ul>
<li>
<p>What's the order of operations for getting all the new users into NEMO?</p>
<ul>
<li>People are complicated, maybe I'll start with the tools</li>
</ul>
</li>
<li>
<p>What do people need to do versus what can I code?</p>
</li>
<li>
<p>Migration:</p>
<ul>
<li>Getting tools, users, PTAs, everything into SNF NEMO</li>
</ul>
</li>
<li>
<p>Configuration</p>
<ul>
<li>Tool owners setting up their tools</li>
<li>Areas</li>
</ul>
</li>
<li>
<p>Education</p>
<ul>
<li>Billing</li>
<li>Staff education</li>
</ul>
</li>
</ul>
<h3>Timeline</h3>
<ul>
<li>Phase 1 (Date):</li>
<li>Phase 2 (Date):</li>
<li>Phase 3 (Date):</li>
</ul>
<h3>Known Issues/Challenges</h3>
<ol>
<li></li>
<li></li>
<li></li>
</ol>
<h2>Grant Questions:</h2>
<ul>
<li>do you actually want SNL or whatever in the tool name?
<ul>
<li>NO want to purge any instances of SNL, SNC, SMF</li>
</ul>
</li>
<li>How are the area access going to work, what tool goes where?
<ul>
<li>Reconviene and understand how area access if going to work, what do the characterization people want? Each tool can be different, does each tool need to be its own area or is there another way?</li>
</ul>
</li>
<li>list of consumables to upload?
<ul>
<li>in the inventory.txt file</li>
</ul>
</li>
<li>How do we want to organize the consumables so people know where they are?
<ul>
<li>Add TEM supplies, more under AFM supplies, SMF supplies, XPS supplies (software licencse?)</li>
</ul>
</li>
<li>For the rates, is there ever a difference between the other academic and local category?
<ul>
<li>No, one in the same</li>
</ul>
</li>
<li>Do you specify any SBIR rates?
<ul>
<li>No, we might not either pretty soon LOL</li>
</ul>
</li>
<li>Send me interlock i.p address list!</li>
</ul>

    </div>
</article>

    </main>

    <footer class="footer">
        <div class="footer__container">
            <p>&copy; 2025 Alex - Denton Works</p>
            <div class="footer__social">
                <a href="https://github.com/alexanderenrique" target="_blank" rel="noopener">GitHub</a>
                <a href="https://twitter.com/yourusername" target="_blank" rel="noopener">Twitter</a>
            </div>
        </div>
    </footer>

    <script src="/js/main.js"></script>
    <!-- Mermaid JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@11.12.0/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#3b82f6',
                primaryTextColor: '#1f2937',
                primaryBorderColor: '#1e40af',
                lineColor: '#6b7280',
                secondaryColor: '#f3f4f6',
                tertiaryColor: '#ffffff'
            }
        });
    </script>
</body>
</html>
